<!DOCTYPE html>
<html lang="en" data-theme="one-dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlgoArena — Sign In</title>
    <link rel="stylesheet" href="theme.css">
    <style>
        body {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        /* ── Back link ── */
        .back-link {
            position: fixed; top: 16px; left: 16px; z-index: 100;
            color: var(--text-secondary); font-size: 13px; font-weight: 500;
            padding: 8px 18px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-pill);
            display: flex; align-items: center; gap: 6px;
            transition: all 0.25s ease;
        }
        .back-link:hover {
            color: var(--text-primary); border-color: var(--border-color);
            transform: translateX(-2px);
        }
        .back-link svg {
            width: 14px; height: 14px; stroke: currentColor; fill: none;
            stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
        }

        /* ── Login wrapper ── */
        .login-wrapper {
            position: relative; z-index: 10;
            width: 100%; max-width: 460px; padding: 20px;
            animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        .login-card {
            background: var(--glass-bg);
            backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-xl);
            padding: 44px 40px;
            box-shadow: var(--shadow-lg);
            position: relative; overflow: hidden;
        }

        .login-card::before {
            content: '';
            position: absolute; top: 0; left: 0; right: 0; height: 2px;
            background: var(--accent-gradient);
        }

        /* ── Brand ── */
        .brand { text-align: center; margin-bottom: 32px; }

        .brand-icon {
            width: 56px; height: 56px; margin: 0 auto 14px;
            background: var(--accent-gradient);
            border-radius: 16px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 8px 24px var(--glow-color);
            animation: iconPulse 3s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { box-shadow: 0 8px 24px var(--glow-color); }
            50% { box-shadow: 0 8px 40px var(--glow-strong); }
        }

        .brand-icon svg {
            width: 28px; height: 28px; stroke: white; fill: none;
            stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
        }

        .brand h1 {
            font-size: 1.75rem; font-weight: 800; letter-spacing: -0.5px;
            background: var(--accent-gradient);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .brand p { color: var(--text-muted); font-size: 14px; margin-top: 6px; }

        /* ── Auth tabs ── */
        .auth-tabs {
            display: flex;
            background: var(--bg-input);
            border-radius: var(--radius-md);
            padding: 4px;
            margin-bottom: 28px;
            position: relative;
        }

        .auth-tab {
            flex: 1; padding: 10px; text-align: center;
            font-size: 13px; font-weight: 600;
            color: var(--text-muted);
            background: none; border: none;
            border-radius: 10px; cursor: pointer;
            transition: color 0.3s ease;
            position: relative; z-index: 2;
            font-family: inherit;
        }

        .auth-tab.active { color: var(--text-primary); }

        .tab-slider {
            position: absolute; top: 4px; left: 4px;
            width: calc(50% - 4px); height: calc(100% - 8px);
            background: var(--bg-primary);
            border-radius: 10px;
            transition: transform 0.35s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: var(--shadow-sm);
            z-index: 1;
        }

        .tab-slider.right { transform: translateX(calc(100% + 4px)); }

        /* ── Form panels ── */
        .form-panel { display: none; }
        .form-panel.active {
            display: block;
            animation: formFade 0.35s ease forwards;
        }

        @keyframes formFade {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group { margin-bottom: 20px; }

        .form-label {
            display: block; font-size: 13px; font-weight: 600;
            color: var(--text-secondary); margin-bottom: 8px; letter-spacing: 0.2px;
        }

        .input-wrap { position: relative; }

        .input-wrap .icon {
            position: absolute; left: 14px; top: 50%; transform: translateY(-50%);
            width: 18px; height: 18px; stroke: var(--text-muted); fill: none;
            stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
            transition: stroke 0.2s ease; pointer-events: none;
        }

        .form-input {
            width: 100%; padding: 13px 14px 13px 44px;
            background: var(--bg-input);
            border: 1.5px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-family: inherit; font-size: 14px;
            outline: none;
            transition: all 0.25s ease;
        }

        .form-input::placeholder { color: var(--text-muted); }

        .form-input:focus {
            border-color: var(--border-focus);
            box-shadow: 0 0 0 3px var(--glow-color);
            background: var(--bg-primary);
        }

        .input-wrap:focus-within .icon { stroke: var(--accent-primary); }

        .pw-toggle {
            position: absolute; right: 14px; top: 50%; transform: translateY(-50%);
            background: none; border: none; cursor: pointer;
            color: var(--text-muted); padding: 4px;
            display: flex; align-items: center;
            transition: color 0.2s ease;
        }
        .pw-toggle:hover { color: var(--text-primary); }
        .pw-toggle svg {
            width: 18px; height: 18px; stroke: currentColor; fill: none;
            stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
        }

        /* ── Options row ── */
        .form-options {
            display: flex; align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .checkbox-label {
            display: flex; align-items: center; gap: 8px;
            cursor: pointer; font-size: 13px; color: var(--text-secondary);
        }

        .checkbox-label input[type="checkbox"] {
            appearance: none; -webkit-appearance: none;
            width: 18px; height: 18px;
            border: 2px solid var(--border-color);
            border-radius: 5px; cursor: pointer;
            transition: all 0.2s ease; position: relative;
            flex-shrink: 0;
        }

        .checkbox-label input[type="checkbox"]:checked {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
        }

        .checkbox-label input[type="checkbox"]:checked::after {
            content: ''; position: absolute; left: 5px; top: 2px;
            width: 5px; height: 9px; border: solid white;
            border-width: 0 2px 2px 0; transform: rotate(45deg);
        }

        .forgot-link {
            font-size: 13px; color: var(--accent-primary);
            font-weight: 500;
        }
        .forgot-link:hover { opacity: 0.8; text-decoration: underline; }

        /* ── Submit button ── */
        .submit-btn {
            width: 100%; padding: 14px 24px;
            background: var(--accent-gradient);
            border: none; border-radius: var(--radius-md);
            color: white; font-family: inherit;
            font-size: 14px; font-weight: 700; letter-spacing: 0.3px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative; overflow: hidden;
        }

        .submit-btn::before {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.12), transparent);
            opacity: 0; transition: opacity 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--glow-strong);
        }
        .submit-btn:hover::before { opacity: 1; }
        .submit-btn:active { transform: translateY(0); }

        .submit-btn.loading { pointer-events: none; opacity: 0.85; }
        .submit-btn.loading .btn-label { opacity: 0; }
        .submit-btn .spinner {
            position: absolute; inset: 0;
            display: flex; align-items: center; justify-content: center; opacity: 0;
        }
        .submit-btn.loading .spinner { opacity: 1; }
        .spinner-ring {
            width: 20px; height: 20px;
            border: 2.5px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%; animation: spin 0.7s linear infinite;
        }

        /* ── Divider ── */
        .divider {
            display: flex; align-items: center;
            margin: 24px 0; gap: 14px;
        }
        .divider::before, .divider::after {
            content: ''; flex: 1; height: 1px;
            background: var(--border-color);
        }
        .divider span {
            font-size: 11px; font-weight: 600; color: var(--text-muted);
            text-transform: uppercase; letter-spacing: 1px;
        }

        /* ── Social buttons ── */
        .social-row { display: flex; gap: 12px; }

        .social-btn {
            flex: 1; padding: 11px;
            background: var(--bg-input);
            border: 1.5px solid var(--border-color);
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 8px;
            font-family: inherit; font-size: 13px; font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.25s ease;
        }

        .social-btn:hover {
            border-color: var(--text-muted);
            background: var(--bg-hover);
            transform: translateY(-1px);
        }

        .social-btn svg { width: 18px; height: 18px; }

        /* ── Password strength ── */
        .strength-row { display: flex; gap: 4px; margin-top: 8px; }
        .strength-seg {
            flex: 1; height: 3px;
            background: var(--border-color);
            border-radius: 3px; transition: background 0.3s ease;
        }
        .strength-seg.s1 { background: var(--error); }
        .strength-seg.s2 { background: var(--warning); }
        .strength-seg.s3 { background: var(--warning); }
        .strength-seg.s4 { background: var(--success); }

        .strength-label {
            font-size: 11px; font-weight: 600; margin-top: 6px;
            transition: color 0.3s ease;
        }

        /* ── Card footer ── */
        .card-footer {
            text-align: center; margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid var(--glass-border);
        }

        .card-footer p {
            font-size: 13px; color: var(--text-muted);
        }

        .card-footer a {
            color: var(--accent-primary); font-weight: 600;
        }
        .card-footer a:hover { text-decoration: underline; }

        /* ── Responsive ── */
        @media (max-width: 500px) {
            .login-card { padding: 32px 24px; border-radius: 16px; }
            .brand h1 { font-size: 1.5rem; }
            .social-row { flex-direction: column; }
        }
    </style>
</head>
<body>
    <!-- BG -->
    <div class="bg-animated"><div class="orb"></div><div class="orb"></div><div class="orb"></div></div>
    <div class="bg-grid"></div>

    <!-- Back -->
    <a href="index.html" class="back-link">
        <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        Home
    </a>

    <!-- Theme switcher -->
    <div class="theme-switcher">
        <span class="theme-label">Theme</span>
        <div class="theme-dot active" data-t="one-dark" onclick="setTheme('one-dark')"><span class="tip">One Dark</span></div>
        <div class="theme-dot" data-t="github-light" onclick="setTheme('github-light')"><span class="tip">GitHub Light</span></div>
        <div class="theme-dot" data-t="monokai" onclick="setTheme('monokai')"><span class="tip">Monokai Pro</span></div>
        <div class="theme-dot" data-t="dracula" onclick="setTheme('dracula')"><span class="tip">Dracula</span></div>
        <div class="theme-dot" data-t="nord" onclick="setTheme('nord')"><span class="tip">Nord</span></div>
    </div>

    <!-- Card -->
    <div class="login-wrapper">
        <div class="login-card">

            <div class="brand">
                <div class="brand-icon">
                    <svg viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                </div>
                <h1>AlgoArena</h1>
                <p>Master algorithms. Compete globally.</p>
            </div>

            <!-- Tabs -->
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchTab('login')">Sign In</button>
                <button class="auth-tab" onclick="switchTab('register')">Create Account</button>
                <div class="tab-slider"></div>
            </div>

            <!-- LOGIN -->
            <form class="form-panel active" id="loginForm" onsubmit="handleSubmit(event,'login')">
                <div class="form-group">
                    <label class="form-label">Email or Username</label>
                    <div class="input-wrap">
                        <svg class="icon" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                        <input type="text" class="form-input" placeholder="you@example.com" required autocomplete="username">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <div class="input-wrap">
                        <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                        <input type="password" class="form-input" id="loginPw" placeholder="Enter your password" required autocomplete="current-password">
                        <button type="button" class="pw-toggle" onclick="togglePw('loginPw',this)">
                            <svg class="eye-on" viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                            <svg class="eye-off" style="display:none" viewBox="0 0 24 24"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
                        </button>
                    </div>
                </div>
                <div class="form-options">
                    <label class="checkbox-label"><input type="checkbox" checked><span>Remember me</span></label>
                    <a href="#" class="forgot-link">Forgot password?</a>
                </div>
                <button type="submit" class="submit-btn">
                    <span class="btn-label">Sign In</span>
                    <span class="spinner"><div class="spinner-ring"></div></span>
                </button>
                <div class="divider"><span>or continue with</span></div>
                <div class="social-row">
                    <button type="button" class="social-btn" onclick="toast('GitHub auth coming soon!')">
                        <svg viewBox="0 0 24 24" fill="var(--text-primary)"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                        GitHub
                    </button>
                    <button type="button" class="social-btn" onclick="toast('Google auth coming soon!')">
                        <svg viewBox="0 0 24 24"><path fill="#4285F4" d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82Z"/><path fill="#34A853" d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24Z"/><path fill="#FBBC05" d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 0 0 0 10.76l3.98-3.09Z"/><path fill="#EA4335" d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96Z"/></svg>
                        Google
                    </button>
                </div>
            </form>

            <!-- REGISTER -->
            <form class="form-panel" id="registerForm" onsubmit="handleSubmit(event,'register')">
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <div class="input-wrap">
                        <svg class="icon" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                        <input type="text" class="form-input" placeholder="Choose a username" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <div class="input-wrap">
                        <svg class="icon" viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                        <input type="email" class="form-input" placeholder="you@example.com" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <div class="input-wrap">
                        <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                        <input type="password" class="form-input" id="regPw" placeholder="Create a strong password" required oninput="checkStrength(this.value)">
                        <button type="button" class="pw-toggle" onclick="togglePw('regPw',this)">
                            <svg class="eye-on" viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                            <svg class="eye-off" style="display:none" viewBox="0 0 24 24"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
                        </button>
                    </div>
                    <div class="strength-row" id="strengthRow">
                        <div class="strength-seg" id="s1"></div>
                        <div class="strength-seg" id="s2"></div>
                        <div class="strength-seg" id="s3"></div>
                        <div class="strength-seg" id="s4"></div>
                    </div>
                    <div class="strength-label" id="strengthLabel"></div>
                </div>
                <div class="form-group">
                    <label class="form-label">Confirm Password</label>
                    <div class="input-wrap">
                        <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                        <input type="password" class="form-input" id="confirmPw" placeholder="Confirm your password" required>
                    </div>
                </div>
                <button type="submit" class="submit-btn" style="margin-top:4px">
                    <span class="btn-label">Create Account</span>
                    <span class="spinner"><div class="spinner-ring"></div></span>
                </button>
                <div class="divider"><span>or continue with</span></div>
                <div class="social-row">
                    <button type="button" class="social-btn" onclick="toast('GitHub auth coming soon!')">
                        <svg viewBox="0 0 24 24" fill="var(--text-primary)"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                        GitHub
                    </button>
                    <button type="button" class="social-btn" onclick="toast('Google auth coming soon!')">
                        <svg viewBox="0 0 24 24"><path fill="#4285F4" d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82Z"/><path fill="#34A853" d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24Z"/><path fill="#FBBC05" d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 0 0 0 10.76l3.98-3.09Z"/><path fill="#EA4335" d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96Z"/></svg>
                        Google
                    </button>
                </div>
            </form>

            <!-- Footer -->
            <div class="card-footer" id="loginFooter">
                <p>Don't have an account? <a href="#" onclick="switchTab('register');return false">Create one free</a></p>
            </div>
            <div class="card-footer" id="registerFooter" style="display:none">
                <p>Already have an account? <a href="#" onclick="switchTab('login');return false">Sign in</a></p>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast-container" id="toastC">
        <div class="toast"><div class="toast-dot"></div><span id="toastMsg">Theme changed!</span></div>
    </div>

    <script>
        /* ── Theme ── */
        function setTheme(t) {
            document.documentElement.setAttribute('data-theme', t);
            document.querySelectorAll('.theme-dot').forEach(d => d.classList.toggle('active', d.dataset.t === t));
            localStorage.setItem('aa-theme', t);
            toast('Theme: ' + t.split('-').map(w => w[0].toUpperCase() + w.slice(1)).join(' '));
        }
        const saved = localStorage.getItem('aa-theme');
        if (saved) { document.documentElement.setAttribute('data-theme', saved); document.querySelectorAll('.theme-dot').forEach(d => d.classList.toggle('active', d.dataset.t === saved)); }

        /* ── Tabs ── */
        function switchTab(tab) {
            const tabs = document.querySelectorAll('.auth-tab');
            const slider = document.querySelector('.tab-slider');
            document.querySelectorAll('.form-panel').forEach(f => f.classList.remove('active'));
            if (tab === 'login') {
                tabs[0].classList.add('active'); tabs[1].classList.remove('active');
                slider.classList.remove('right');
                document.getElementById('loginForm').classList.add('active');
                document.getElementById('loginFooter').style.display = '';
                document.getElementById('registerFooter').style.display = 'none';
            } else {
                tabs[1].classList.add('active'); tabs[0].classList.remove('active');
                slider.classList.add('right');
                document.getElementById('registerForm').classList.add('active');
                document.getElementById('loginFooter').style.display = 'none';
                document.getElementById('registerFooter').style.display = '';
            }
        }

        /* ── Password toggle ── */
        function togglePw(id, btn) {
            const inp = document.getElementById(id);
            const on = btn.querySelector('.eye-on'), off = btn.querySelector('.eye-off');
            if (inp.type === 'password') { inp.type = 'text'; on.style.display = 'none'; off.style.display = ''; }
            else { inp.type = 'password'; on.style.display = ''; off.style.display = 'none'; }
        }

        /* ── Password strength ── */
        function checkStrength(pw) {
            const segs = ['s1','s2','s3','s4'].map(id => document.getElementById(id));
            const label = document.getElementById('strengthLabel');
            let score = 0;
            if (pw.length >= 6) score++;
            if (pw.length >= 10) score++;
            if (/[A-Z]/.test(pw) && /[a-z]/.test(pw)) score++;
            if (/[0-9]/.test(pw) && /[^A-Za-z0-9]/.test(pw)) score++;
            segs.forEach(s => s.className = 'strength-seg');
            for (let i = 0; i < score; i++) segs[i].classList.add('s' + score);
            const labels = ['','Weak','Fair','Good','Strong'];
            const colors = ['','var(--error)','var(--warning)','var(--warning)','var(--success)'];
            label.textContent = pw ? labels[score] : '';
            label.style.color = colors[score];
        }

        /* ── Submit ── */
        function handleSubmit(e, type) {
            e.preventDefault();
            if (type === 'register') {
                if (document.getElementById('regPw').value !== document.getElementById('confirmPw').value)
                    return toast('Passwords do not match!');
            }
            const btn = e.target.querySelector('.submit-btn');
            btn.classList.add('loading');
            setTimeout(() => {
                btn.classList.remove('loading');
                toast(type === 'login' ? 'Welcome back! Redirecting...' : 'Account created! Redirecting...');
                localStorage.setItem('aa-show-tutorial', 'true');
                setTimeout(() => { window.location.href = 'problems-list.html'; }, 1200);
            }, 1500);
        }

        /* ── Toast ── */
        let toastT;
        function toast(msg) {
            document.getElementById('toastMsg').textContent = msg;
            const c = document.getElementById('toastC');
            c.classList.add('show');
            clearTimeout(toastT);
            toastT = setTimeout(() => c.classList.remove('show'), 2500);
        }
    </script>
</body>
</html>
