<!DOCTYPE html>
<html lang="en" data-theme="one-dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlgoArena ‚Äî Technical Overview</title>
    <link rel="stylesheet" href="theme.css">
    <style>
        .overview-hero {
            text-align: center;
            padding: 100px 24px 60px;
        }

        .overview-hero h1 {
            font-size: 42px; font-weight: 900;
            background: var(--accent-gradient);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 14px;
        }

        .overview-hero p {
            font-size: 16px; color: var(--text-secondary);
            max-width: 600px; margin: 0 auto;
            line-height: 1.7;
        }

        .overview-content {
            max-width: 960px;
            margin: 0 auto;
            padding: 0 24px 80px;
        }

        .section {
            margin-bottom: 48px;
        }

        .section-heading {
            font-size: 22px; font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 20px;
            display: flex; align-items: center; gap: 10px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .section-heading svg {
            width: 22px; height: 22px; stroke: var(--accent-primary); fill: none;
            stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
        }

        /* Architecture diagram */
        .arch-diagram {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: 40px 32px;
            backdrop-filter: blur(10px);
            margin-bottom: 32px;
        }

        .arch-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
            flex-wrap: wrap;
        }

        .arch-node {
            background: var(--bg-input);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 20px 24px;
            text-align: center;
            min-width: 140px;
            transition: all 0.3s ease;
        }

        .arch-node:hover {
            border-color: var(--accent-primary);
            transform: translateY(-3px);
            box-shadow: 0 8px 24px var(--glow-color);
        }

        .arch-node-icon {
            width: 44px; height: 44px;
            border-radius: 12px;
            margin: 0 auto 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 22px;
        }

        .arch-node h4 {
            font-size: 13px; font-weight: 700; color: var(--text-primary);
            margin-bottom: 2px;
        }

        .arch-node p { font-size: 11px; color: var(--text-muted); }

        .arch-arrow {
            color: var(--text-muted);
            font-size: 20px;
            padding: 0 12px;
            flex-shrink: 0;
        }

        /* Tech stack grid */
        .stack-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
        }

        .stack-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: 24px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .stack-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 32px var(--glow-color);
            border-color: var(--accent-primary);
        }

        .stack-card-header {
            display: flex; align-items: center; gap: 12px;
            margin-bottom: 14px;
        }

        .stack-card-icon {
            width: 42px; height: 42px;
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 22px; flex-shrink: 0;
        }

        .stack-card-header h4 {
            font-size: 15px; font-weight: 700; color: var(--text-primary);
        }

        .stack-card-header p {
            font-size: 12px; color: var(--text-muted);
        }

        .stack-card .tech-list {
            display: flex; flex-direction: column; gap: 8px;
        }

        .tech-item {
            display: flex; align-items: center; gap: 8px;
            font-size: 13px; color: var(--text-secondary);
        }

        .tech-dot {
            width: 6px; height: 6px;
            border-radius: 50%;
            background: var(--accent-primary);
            flex-shrink: 0;
        }

        /* Feature list */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 16px;
        }

        .feature-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: 22px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 24px var(--glow-color);
        }

        .feature-icon {
            width: 40px; height: 40px;
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 14px;
            font-size: 20px;
        }

        .feature-card h4 {
            font-size: 14px; font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 6px;
        }

        .feature-card p {
            font-size: 13px; color: var(--text-muted);
            line-height: 1.6;
        }

        /* Design system */
        .color-row {
            display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 20px;
        }

        .color-swatch {
            width: 64px; height: 64px;
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .color-swatch:hover { transform: scale(1.08); }

        .color-swatch span {
            position: absolute; bottom: -20px;
            left: 50%; transform: translateX(-50%);
            font-size: 10px; font-weight: 600; color: var(--text-muted);
            white-space: nowrap;
        }

        .theme-preview-row {
            display: flex; gap: 12px; flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .theme-preview-card {
            flex: 1; min-width: 160px;
            border-radius: var(--radius-md);
            border: 2px solid var(--border-color);
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-preview-card:hover, .theme-preview-card.active {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--glow-color);
        }

        .theme-preview-bar {
            height: 48px;
            display: flex; align-items: center; padding: 0 12px; gap: 6px;
        }

        .theme-preview-dot {
            width: 10px; height: 10px; border-radius: 50%;
        }

        .theme-preview-body {
            height: 48px; padding: 8px 12px;
            display: flex; flex-direction: column; gap: 4px;
        }

        .theme-preview-line {
            height: 6px; border-radius: 3px; opacity: 0.6;
        }

        .theme-preview-label {
            text-align: center; padding: 8px;
            font-size: 11px; font-weight: 700;
        }

        /* API table */
        .api-table-wrap {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .api-table {
            width: 100%; border-collapse: collapse;
        }

        .api-table th {
            font-size: 11px; font-weight: 700;
            color: var(--text-muted);
            text-transform: uppercase; letter-spacing: 0.5px;
            padding: 14px 20px; text-align: left;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .api-table td {
            padding: 12px 20px;
            font-size: 13px; color: var(--text-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .api-table tr:last-child td { border-bottom: none; }

        .method-badge {
            padding: 3px 10px;
            border-radius: var(--radius-pill);
            font-size: 11px; font-weight: 800;
            font-family: 'JetBrains Mono', monospace;
        }

        .method-badge.get { background: rgba(0,255,136,0.12); color: var(--diff-easy); }
        .method-badge.post { background: rgba(99,102,241,0.15); color: var(--accent-primary); }
        .method-badge.put { background: rgba(251,191,36,0.15); color: var(--diff-medium); }
        .method-badge.delete { background: rgba(255,85,85,0.12); color: var(--diff-hard); }

        .endpoint-path {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px; font-weight: 600;
            color: var(--text-primary);
        }

        @media (max-width: 768px) {
            .overview-hero h1 { font-size: 28px; }
            .arch-flow { flex-direction: column; }
            .arch-arrow { transform: rotate(90deg); padding: 4px; }
        }
    </style>
</head>
<body>
    <div class="bg-animated"><div class="orb orb-1"></div><div class="orb orb-2"></div><div class="orb orb-3"></div><div class="grid-overlay"></div></div>

    <nav class="navbar">
        <a href="problems-list.html" class="nav-brand">
            <div class="nav-brand-icon"><svg viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div>
            <span class="nav-brand-text">AlgoArena</span>
        </a>
        <div class="nav-links">
            <a href="problems-list.html" class="nav-link">
                <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
                Problems
            </a>
            <a href="profile.html" class="nav-link">
                <svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                Profile
            </a>
            <a href="admin.html" class="nav-link">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c.26.604.852.997 1.51 1H21a2 2 0 0 1 0 4h-.09c-.658.003-1.25.396-1.51 1z"/></svg>
                Admin
            </a>
        </div>
        <div class="nav-right">
            <div class="avatar">AR</div>
        </div>
    </nav>

    <div class="theme-switcher">
        <span class="theme-label">Theme</span>
        <div class="theme-dot active" data-t="one-dark" onclick="setTheme('one-dark')"><span class="tip">One Dark</span></div>
        <div class="theme-dot" data-t="github-light" onclick="setTheme('github-light')"><span class="tip">GitHub Light</span></div>
        <div class="theme-dot" data-t="monokai" onclick="setTheme('monokai')"><span class="tip">Monokai Pro</span></div>
        <div class="theme-dot" data-t="dracula" onclick="setTheme('dracula')"><span class="tip">Dracula</span></div>
        <div class="theme-dot" data-t="nord" onclick="setTheme('nord')"><span class="tip">Nord</span></div>
    </div>

    <div class="overview-hero fade-in-up">
        <h1>Technical Overview</h1>
        <p>A deep dive into AlgoArena's architecture, technology stack, API design, and the design system powering the user interface.</p>
    </div>

    <div class="overview-content">
        <!-- Architecture -->
        <div class="section fade-in-up">
            <div class="section-heading">
                <svg viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"/><rect x="2" y="14" width="20" height="8" rx="2" ry="2"/><line x1="6" y1="6" x2="6.01" y2="6"/><line x1="6" y1="18" x2="6.01" y2="18"/></svg>
                System Architecture
            </div>
            <div class="arch-diagram">
                <div class="arch-flow">
                    <div class="arch-node">
                        <div class="arch-node-icon" style="background:rgba(99,102,241,0.15)">üåê</div>
                        <h4>Next.js Frontend</h4>
                        <p>React + TypeScript</p>
                    </div>
                    <div class="arch-arrow">‚Üí</div>
                    <div class="arch-node">
                        <div class="arch-node-icon" style="background:rgba(0,255,136,0.12)">‚ö°</div>
                        <h4>Flask API</h4>
                        <p>Python Backend</p>
                    </div>
                    <div class="arch-arrow">‚Üí</div>
                    <div class="arch-node">
                        <div class="arch-node-icon" style="background:rgba(251,191,36,0.15)">üê≥</div>
                        <h4>Docker Judge</h4>
                        <p>Sandboxed Executor</p>
                    </div>
                    <div class="arch-arrow">‚Üí</div>
                    <div class="arch-node">
                        <div class="arch-node-icon" style="background:rgba(236,72,153,0.15)">üóÑÔ∏è</div>
                        <h4>PostgreSQL</h4>
                        <p>Database</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tech Stack -->
        <div class="section fade-in-up">
            <div class="section-heading">
                <svg viewBox="0 0 24 24"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>
                Technology Stack
            </div>
            <div class="stack-grid stagger">
                <div class="stack-card">
                    <div class="stack-card-header">
                        <div class="stack-card-icon" style="background:rgba(99,102,241,0.15)">‚öõÔ∏è</div>
                        <div><h4>Frontend</h4><p>User Interface</p></div>
                    </div>
                    <div class="tech-list">
                        <div class="tech-item"><div class="tech-dot"></div>Next.js 15 (App Router)</div>
                        <div class="tech-item"><div class="tech-dot"></div>TypeScript 5</div>
                        <div class="tech-item"><div class="tech-dot"></div>Tailwind CSS</div>
                        <div class="tech-item"><div class="tech-dot"></div>Monaco Editor (Code)</div>
                    </div>
                </div>
                <div class="stack-card">
                    <div class="stack-card-header">
                        <div class="stack-card-icon" style="background:rgba(0,255,136,0.12)">üêç</div>
                        <div><h4>Backend</h4><p>API Server</p></div>
                    </div>
                    <div class="tech-list">
                        <div class="tech-item"><div class="tech-dot"></div>Python 3.12 + Flask</div>
                        <div class="tech-item"><div class="tech-dot"></div>Flask-CORS, Flask-JWT</div>
                        <div class="tech-item"><div class="tech-dot"></div>SQLAlchemy ORM</div>
                        <div class="tech-item"><div class="tech-dot"></div>Gunicorn WSGI</div>
                    </div>
                </div>
                <div class="stack-card">
                    <div class="stack-card-header">
                        <div class="stack-card-icon" style="background:rgba(251,191,36,0.15)">üê≥</div>
                        <div><h4>Judge System</h4><p>Code Execution</p></div>
                    </div>
                    <div class="tech-list">
                        <div class="tech-item"><div class="tech-dot"></div>Docker Containers</div>
                        <div class="tech-item"><div class="tech-dot"></div>Resource Limits (CPU/Mem)</div>
                        <div class="tech-item"><div class="tech-dot"></div>Python & C++ Drivers</div>
                        <div class="tech-item"><div class="tech-dot"></div>Sandboxed Execution</div>
                    </div>
                </div>
                <div class="stack-card">
                    <div class="stack-card-header">
                        <div class="stack-card-icon" style="background:rgba(236,72,153,0.15)">üóÑÔ∏è</div>
                        <div><h4>Database</h4><p>Data Layer</p></div>
                    </div>
                    <div class="tech-list">
                        <div class="tech-item"><div class="tech-dot"></div>PostgreSQL 16</div>
                        <div class="tech-item"><div class="tech-dot"></div>Users, Problems, Submissions</div>
                        <div class="tech-item"><div class="tech-dot"></div>Indexed Queries</div>
                        <div class="tech-item"><div class="tech-dot"></div>Docker Compose Setup</div>
                    </div>
                </div>
                <div class="stack-card">
                    <div class="stack-card-header">
                        <div class="stack-card-icon" style="background:rgba(139,92,246,0.15)">ü§ñ</div>
                        <div><h4>AI Assistant</h4><p>Smart Hints</p></div>
                    </div>
                    <div class="tech-list">
                        <div class="tech-item"><div class="tech-dot"></div>OpenAI / Gemini API</div>
                        <div class="tech-item"><div class="tech-dot"></div>Context-Aware Prompting</div>
                        <div class="tech-item"><div class="tech-dot"></div>Hint System</div>
                        <div class="tech-item"><div class="tech-dot"></div>Code Review</div>
                    </div>
                </div>
                <div class="stack-card">
                    <div class="stack-card-header">
                        <div class="stack-card-icon" style="background:rgba(59,130,246,0.15)">üîß</div>
                        <div><h4>DevOps</h4><p>Infrastructure</p></div>
                    </div>
                    <div class="tech-list">
                        <div class="tech-item"><div class="tech-dot"></div>Docker Compose</div>
                        <div class="tech-item"><div class="tech-dot"></div>GitHub Actions CI/CD</div>
                        <div class="tech-item"><div class="tech-dot"></div>Environment Variables</div>
                        <div class="tech-item"><div class="tech-dot"></div>Health Checks</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Key Features -->
        <div class="section fade-in-up">
            <div class="section-heading">
                <svg viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                Key Features
            </div>
            <div class="feature-grid stagger">
                <div class="feature-card">
                    <div class="feature-icon" style="background:rgba(0,255,136,0.12)">üîí</div>
                    <h4>Sandboxed Execution</h4>
                    <p>User code runs in isolated Docker containers with strict CPU, memory, and time limits.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon" style="background:rgba(99,102,241,0.15)">üé®</div>
                    <h4>5 VS Code Themes</h4>
                    <p>One Dark, GitHub Light, Monokai Pro, Dracula, and Nord ‚Äî persisted in localStorage.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon" style="background:rgba(251,191,36,0.15)">‚ö°</div>
                    <h4>Real-Time Judging</h4>
                    <p>Instant feedback with test case results, runtime metrics, and memory usage stats.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon" style="background:rgba(236,72,153,0.15)">ü§ñ</div>
                    <h4>AI-Powered Hints</h4>
                    <p>Contextual AI assistance that provides hints without giving away the full solution.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon" style="background:rgba(139,92,246,0.15)">üìä</div>
                    <h4>Progress Tracking</h4>
                    <p>GitHub-style contribution heatmaps, streak counters, badges, and leaderboard rankings.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon" style="background:rgba(59,130,246,0.15)">üåê</div>
                    <h4>Multi-Language</h4>
                    <p>Supports Python 3, C++ 17, and JavaScript with syntax-highlighted Monaco editor.</p>
                </div>
            </div>
        </div>

        <!-- API Reference -->
        <div class="section fade-in-up">
            <div class="section-heading">
                <svg viewBox="0 0 24 24"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
                API Endpoints
            </div>
            <div class="api-table-wrap">
                <table class="api-table">
                    <thead>
                        <tr><th>Method</th><th>Endpoint</th><th>Description</th><th>Auth</th></tr>
                    </thead>
                    <tbody>
                        <tr><td><span class="method-badge post">POST</span></td><td class="endpoint-path">/api/register</td><td>Create new user account</td><td>No</td></tr>
                        <tr><td><span class="method-badge post">POST</span></td><td class="endpoint-path">/api/login</td><td>Authenticate and receive JWT token</td><td>No</td></tr>
                        <tr><td><span class="method-badge get">GET</span></td><td class="endpoint-path">/api/problems</td><td>List all problems with filters</td><td>Yes</td></tr>
                        <tr><td><span class="method-badge get">GET</span></td><td class="endpoint-path">/api/problems/:slug</td><td>Get problem details by slug</td><td>Yes</td></tr>
                        <tr><td><span class="method-badge post">POST</span></td><td class="endpoint-path">/api/submit</td><td>Submit code for judging</td><td>Yes</td></tr>
                        <tr><td><span class="method-badge post">POST</span></td><td class="endpoint-path">/api/run</td><td>Run code against test cases</td><td>Yes</td></tr>
                        <tr><td><span class="method-badge get">GET</span></td><td class="endpoint-path">/api/submissions</td><td>Get user submission history</td><td>Yes</td></tr>
                        <tr><td><span class="method-badge get">GET</span></td><td class="endpoint-path">/api/profile/:id</td><td>Get user profile and stats</td><td>Yes</td></tr>
                        <tr><td><span class="method-badge put">PUT</span></td><td class="endpoint-path">/api/profile</td><td>Update user profile</td><td>Yes</td></tr>
                        <tr><td><span class="method-badge post">POST</span></td><td class="endpoint-path">/api/ai-hint</td><td>Get AI-powered hint for problem</td><td>Yes</td></tr>
                        <tr><td><span class="method-badge post">POST</span></td><td class="endpoint-path">/api/admin/problems</td><td>Create a new problem (admin)</td><td>Admin</td></tr>
                        <tr><td><span class="method-badge delete">DELETE</span></td><td class="endpoint-path">/api/admin/problems/:id</td><td>Delete a problem (admin)</td><td>Admin</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Design System -->
        <div class="section fade-in-up">
            <div class="section-heading">
                <svg viewBox="0 0 24 24"><circle cx="13.5" cy="6.5" r="2.5"/><path d="M17.5 10.5h3.7a1.7 1.7 0 0 1 0 3.4h-3.7"/><circle cx="8.5" cy="14.5" r="2.5"/><path d="M2.8 10.5h3.7"/><circle cx="17" cy="18" r="2"/></svg>
                Design System ‚Äî Themes
            </div>
            <div class="theme-preview-row" id="themePreview"></div>
            <div style="margin-top:20px;padding:20px;background:var(--glass-bg);border:1px solid var(--glass-border);border-radius:var(--radius-lg);backdrop-filter:blur(10px)">
                <p style="font-size:13px;color:var(--text-secondary);line-height:1.8;margin-bottom:12px">
                    The design system uses <strong style="color:var(--text-primary)">CSS custom properties</strong> (200+ variables per theme) for instant theme switching without page reload. Themes are persisted via <code style="background:var(--bg-input);padding:2px 6px;border-radius:4px;font-size:12px">localStorage</code> under the <code style="background:var(--bg-input);padding:2px 6px;border-radius:4px;font-size:12px">aa-theme</code> key.
                </p>
                <p style="font-size:13px;color:var(--text-secondary);line-height:1.8">
                    <strong style="color:var(--text-primary)">Typography:</strong> Inter (300‚Äì900) for UI, JetBrains Mono (400‚Äì700) for code.
                    <strong style="color:var(--text-primary)">Effects:</strong> Glassmorphism with backdrop-filter blur, animated gradient orbs, grid overlays, and staggered entry animations.
                </p>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast-container" id="toastC">
        <div class="toast"><div class="toast-dot"></div><span id="toastMsg"></span></div>
    </div>

    <script>
        function setTheme(t) {
            document.documentElement.setAttribute('data-theme', t);
            document.querySelectorAll('.theme-dot').forEach(d => d.classList.toggle('active', d.dataset.t === t));
            localStorage.setItem('aa-theme', t);
            updateThemePreview(t);
            toast('Theme: ' + t.split('-').map(w => w[0].toUpperCase() + w.slice(1)).join(' '));
        }
        const saved = localStorage.getItem('aa-theme');
        if (saved) { document.documentElement.setAttribute('data-theme', saved); document.querySelectorAll('.theme-dot').forEach(d => d.classList.toggle('active', d.dataset.t === saved)); }

        let ttt;
        function toast(msg) {
            document.getElementById('toastMsg').textContent = msg;
            const c = document.getElementById('toastC'); c.classList.add('show');
            clearTimeout(ttt); ttt = setTimeout(() => c.classList.remove('show'), 2500);
        }

        // Theme previews
        const themes = [
            { id: 'one-dark', name: 'One Dark', bar: '#1e1e2e', bg: '#282a36', accent: '#cba6f7', text: '#a6adc8' },
            { id: 'github-light', name: 'GitHub Light', bar: '#ffffff', bg: '#f6f8fa', accent: '#0969da', text: '#656d76' },
            { id: 'monokai', name: 'Monokai Pro', bar: '#1e1f1c', bg: '#272822', accent: '#a6e22e', text: '#a9dc76' },
            { id: 'dracula', name: 'Dracula', bar: '#282a36', bg: '#1e1f29', accent: '#bd93f9', text: '#6272a4' },
            { id: 'nord', name: 'Nord', bar: '#2e3440', bg: '#3b4252', accent: '#88c0d0', text: '#7b88a1' }
        ];

        function updateThemePreview(active) {
            document.querySelectorAll('.theme-preview-card').forEach(c => c.classList.toggle('active', c.dataset.t === active));
        }

        const wrap = document.getElementById('themePreview');
        themes.forEach(t => {
            const card = document.createElement('div');
            card.className = 'theme-preview-card' + ((saved || 'one-dark') === t.id ? ' active' : '');
            card.dataset.t = t.id;
            card.onclick = () => setTheme(t.id);
            card.innerHTML = `
                <div class="theme-preview-bar" style="background:${t.bar}">
                    <div class="theme-preview-dot" style="background:#ff5f57"></div>
                    <div class="theme-preview-dot" style="background:#febc2e"></div>
                    <div class="theme-preview-dot" style="background:#28c840"></div>
                </div>
                <div class="theme-preview-body" style="background:${t.bg}">
                    <div class="theme-preview-line" style="background:${t.accent};width:60%"></div>
                    <div class="theme-preview-line" style="background:${t.text};width:80%"></div>
                    <div class="theme-preview-line" style="background:${t.text};width:45%"></div>
                </div>
                <div class="theme-preview-label" style="background:${t.bar};color:${t.accent}">${t.name}</div>`;
            wrap.appendChild(card);
        });
    </script>
</body>
</html>
